<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nGrinder ì™„ë²½ ê°€ì´ë“œ - ì„¤ì¹˜ë¶€í„° ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ê¹Œì§€</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            line-height: 1.8;
            color: #333;
            background: #f8f9fa;
        }

        .blog-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .blog-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 40px;
            text-align: center;
        }

        .blog-header h1 {
            font-size: 42px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .blog-header .meta {
            font-size: 16px;
            opacity: 0.9;
            margin-top: 20px;
        }

        .blog-header .meta span {
            margin: 0 15px;
        }

        .blog-content {
            padding: 50px 40px;
        }

        .toc {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 25px;
            margin: 30px 0;
            border-radius: 8px;
        }

        .toc h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .toc ol {
            margin-left: 20px;
        }

        .toc li {
            margin: 8px 0;
            cursor: pointer;
            color: #495057;
        }

        .toc li:hover {
            color: #667eea;
        }

        .section {
            margin: 50px 0;
            scroll-margin-top: 20px;
        }

        .section h2 {
            font-size: 32px;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            font-size: 24px;
            color: #34495e;
            margin: 30px 0 15px 0;
            font-weight: 600;
        }

        .section h4 {
            font-size: 18px;
            color: #495057;
            margin: 20px 0 10px 0;
            font-weight: 600;
        }

        .section p {
            margin: 15px 0;
            line-height: 1.8;
            color: #495057;
        }

        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', Consolas, monospace;
            font-size: 14px;
            line-height: 1.6;
            position: relative;
        }

        .code-block::before {
            content: attr(data-lang);
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 12px;
            color: #5c6370;
            text-transform: uppercase;
        }

        .code-comment {
            color: #5c6370;
        }

        .code-keyword {
            color: #c678dd;
        }

        .code-string {
            color: #98c379;
        }

        .code-function {
            color: #61afef;
        }

        .code-number {
            color: #d19a66;
        }

        .highlight-box {
            background: #fff9e6;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 25px 0;
            border-radius: 4px;
        }

        .highlight-box strong {
            color: #856404;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 20px;
            margin: 25px 0;
            border-radius: 4px;
        }

        .info-box strong {
            color: #0c5460;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ff9800;
            padding: 20px;
            margin: 25px 0;
            border-radius: 4px;
        }

        .warning-box strong {
            color: #856404;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 25px 0;
            border-radius: 4px;
        }

        .success-box strong {
            color: #155724;
        }

        .command-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .step-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
            margin-right: 10px;
        }

        .step-container {
            margin: 30px 0;
        }

        .step-item {
            margin: 25px 0;
            display: flex;
            align-items: flex-start;
        }

        .step-content {
            flex: 1;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        thead {
            background: #667eea;
            color: white;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        tbody tr:nth-child(even) {
            background: #fafbfc;
        }

        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        ul li, ol li {
            margin: 10px 0;
            line-height: 1.8;
        }

        .architecture-diagram {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .arch-box {
            display: inline-block;
            padding: 15px 25px;
            margin: 10px;
            border: 2px solid #667eea;
            border-radius: 8px;
            background: #f8f9ff;
        }

        .arrow {
            display: inline-block;
            margin: 0 10px;
            color: #667eea;
            font-size: 24px;
        }

        .blog-footer {
            background: #2c3e50;
            color: white;
            padding: 40px;
            margin-top: 60px;
        }

        .blog-footer h3 {
            margin-bottom: 15px;
            color: white;
        }

        .tag-container {
            margin: 30px 0;
        }

        .tag {
            display: inline-block;
            background: #e9ecef;
            padding: 6px 15px;
            margin: 5px;
            border-radius: 20px;
            font-size: 14px;
            color: #495057;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .badge-new {
            background: #e74c3c;
            color: white;
        }

        .badge-important {
            background: #f39c12;
            color: white;
        }

        .comparison-table {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        .comparison-card {
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            background: white;
        }

        .comparison-card h4 {
            color: #667eea;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .blog-header h1 {
                font-size: 32px;
            }

            .blog-content {
                padding: 30px 20px;
            }

            .section h2 {
                font-size: 26px;
            }

            .comparison-table {
                grid-template-columns: 1fr;
            }

            .step-item {
                flex-direction: column;
            }

            .step-number {
                margin-bottom: 10px;
            }
        }

        .image-placeholder {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 60px 20px;
            text-align: center;
            margin: 25px 0;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="blog-container">
        <!-- Header -->
        <div class="blog-header">
            <h1>ğŸš€ nGrinder ì™„ë²½ ê°€ì´ë“œ</h1>
            <p style="font-size: 20px; margin-top: 15px;">ì„¤ì¹˜ë¶€í„° ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ê¹Œì§€ - ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ì˜ ëª¨ë“  ê²ƒ</p>
            <div class="meta">
                <span>ğŸ“… 2024ë…„ 10ì›” 28ì¼</span>
                <span>ğŸ‘¤ Performance Engineer</span>
                <span>â±ï¸ 15ë¶„ ì½ê¸°</span>
            </div>
        </div>

        <div class="blog-content">
            <!-- Introduction -->
            <div class="section">
                <p style="font-size: 18px; color: #2c3e50; font-weight: 500;">
                    ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ê³  ë³‘ëª© ì§€ì ì„ ì°¾ì•„ë‚´ëŠ” ê²ƒì€ ì„œë¹„ìŠ¤ í’ˆì§ˆì„ ë³´ì¥í•˜ëŠ” í•µì‹¬ ê³¼ì •ì…ë‹ˆë‹¤. 
                    ì´ ê¸€ì—ì„œëŠ” ë„¤ì´ë²„ì—ì„œ ê°œë°œí•œ ì˜¤í”ˆì†ŒìŠ¤ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë„êµ¬ì¸ <strong>nGrinder</strong>ë¥¼ ì²˜ìŒ ì‚¬ìš©í•˜ëŠ” ë¶„ë“¤ë„ 
                    ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆë„ë¡ ìì„¸íˆ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.
                </p>
            </div>

            <!-- Table of Contents -->
            <div class="toc">
                <h3>ğŸ“‘ ëª©ì°¨</h3>
                <ol>
                    <li><a href="#what-is-ngrinder">nGrinderë€ ë¬´ì—‡ì¸ê°€?</a></li>
                    <li><a href="#architecture">ì•„í‚¤í…ì²˜ ì´í•´í•˜ê¸°</a></li>
                    <li><a href="#installation">ì„¤ì¹˜ ë° í™˜ê²½ ì„¤ì •</a></li>
                    <li><a href="#first-test">ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰í•˜ê¸°</a></li>
                    <li><a href="#script-basics">ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ê¸°ì´ˆ</a></li>
                    <li><a href="#advanced-script">ê³ ê¸‰ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±</a></li>
                    <li><a href="#test-config">í…ŒìŠ¤íŠ¸ ì„¤ì • ì™„ë²½ ê°€ì´ë“œ</a></li>
                    <li><a href="#result-analysis">ê²°ê³¼ ë¶„ì„í•˜ê¸°</a></li>
                    <li><a href="#best-practices">Best Practices</a></li>
                    <li><a href="#troubleshooting">ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ í•´ê²°</a></li>
                </ol>
            </div>

            <!-- Section 1: What is nGrinder -->
            <div class="section" id="what-is-ngrinder">
                <h2>1. nGrinderë€ ë¬´ì—‡ì¸ê°€?</h2>
                
                <p>
                    <strong>nGrinder</strong>ëŠ” ë„¤ì´ë²„ì—ì„œ ê°œë°œí•œ ì˜¤í”ˆì†ŒìŠ¤ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í”Œë«í¼ì…ë‹ˆë‹¤. 
                    The Grinderë¼ëŠ” ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œìœ¼ë©°, ì›¹ ê¸°ë°˜ UIë¥¼ í†µí•´ ì‰½ê²Œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ 
                    ì‘ì„±í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>

                <h3>ì£¼ìš” íŠ¹ì§•</h3>
                <ul>
                    <li><strong>ì›¹ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤</strong>: ë³„ë„ì˜ í´ë¼ì´ì–¸íŠ¸ ì„¤ì¹˜ ì—†ì´ ë¸Œë¼ìš°ì €ì—ì„œ ëª¨ë“  ì‘ì—… ìˆ˜í–‰</li>
                    <li><strong>ìŠ¤í¬ë¦½íŠ¸ ê¸°ë°˜ í…ŒìŠ¤íŠ¸</strong>: Groovy, Jython, Groovy Maven í”„ë¡œì íŠ¸ ì§€ì›</li>
                    <li><strong>ë¶„ì‚° í…ŒìŠ¤íŠ¸</strong>: ì—¬ëŸ¬ ì—ì´ì „íŠ¸ë¥¼ í†µí•œ ëŒ€ê·œëª¨ ë¶€í•˜ ìƒì„± ê°€ëŠ¥</li>
                    <li><strong>ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</strong>: í…ŒìŠ¤íŠ¸ ì¤‘ TPS, ì‘ë‹µì‹œê°„ ë“±ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸</li>
                    <li><strong>ìƒì„¸í•œ ë³´ê³ ì„œ</strong>: ê·¸ë˜í”„ì™€ í†µê³„ë¥¼ í¬í•¨í•œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì œê³µ</li>
                </ul>

                <h3>ì™œ nGrinderë¥¼ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?</h3>
                
                <div class="comparison-table">
                    <div class="comparison-card">
                        <h4>âœ… nGrinderì˜ ì¥ì </h4>
                        <ul>
                            <li>ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤</li>
                            <li>í•œê¸€ ì§€ì› (ë„¤ì´ë²„ ê°œë°œ)</li>
                            <li>ì‰¬ìš´ ì„¤ì¹˜ ë° ì„¤ì •</li>
                            <li>ìŠ¤í¬ë¦½íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ë³µì¡í•œ ì‹œë‚˜ë¦¬ì˜¤ êµ¬í˜„</li>
                            <li>ë¶„ì‚° í…ŒìŠ¤íŠ¸ ì§€ì›</li>
                            <li>SVN í†µí•©</li>
                        </ul>
                    </div>
                    <div class="comparison-card">
                        <h4>âš ï¸ ê³ ë ¤ì‚¬í•­</h4>
                        <ul>
                            <li>ì´ˆê¸° í•™ìŠµ ê³¡ì„  ì¡´ì¬</li>
                            <li>Groovy/Jython ìŠ¤í¬ë¦½íŠ¸ í•™ìŠµ í•„ìš”</li>
                            <li>ëŒ€ê·œëª¨ í…ŒìŠ¤íŠ¸ ì‹œ ì—ì´ì „íŠ¸ ê´€ë¦¬ í•„ìš”</li>
                            <li>í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ í™˜ê²½ì—ì„œëŠ” ì¶”ê°€ ì„¤ì • í•„ìš”</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Section 2: Architecture -->
            <div class="section" id="architecture">
                <h2>2. ì•„í‚¤í…ì²˜ ì´í•´í•˜ê¸°</h2>
                
                <p>
                    nGrinderëŠ” í¬ê²Œ <strong>Controller</strong>ì™€ <strong>Agent</strong>ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.
                </p>

                <div class="architecture-diagram">
                    <div class="arch-box" style="background: #e3f2fd;">
                        <strong>ğŸ‘¤ ì‚¬ìš©ì</strong><br>
                        <small>ì›¹ ë¸Œë¼ìš°ì €</small>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="arch-box" style="background: #f3e5f5;">
                        <strong>ğŸ® Controller</strong><br>
                        <small>í…ŒìŠ¤íŠ¸ ê´€ë¦¬ & ëª¨ë‹ˆí„°ë§</small>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="arch-box" style="background: #e8f5e9;">
                        <strong>ğŸ¤– Agent(s)</strong><br>
                        <small>ë¶€í•˜ ìƒì„±</small>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="arch-box" style="background: #fff3e0;">
                        <strong>ğŸ¯ Target</strong><br>
                        <small>í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ì„œë²„</small>
                    </div>
                </div>

                <h3>êµ¬ì„± ìš”ì†Œ ìƒì„¸</h3>

                <table>
                    <thead>
                        <tr>
                            <th>êµ¬ì„± ìš”ì†Œ</th>
                            <th>ì—­í• </th>
                            <th>í¬íŠ¸</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Controller</strong></td>
                            <td>
                                â€¢ ì›¹ ì¸í„°í˜ì´ìŠ¤ ì œê³µ<br>
                                â€¢ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ê´€ë¦¬<br>
                                â€¢ ì—ì´ì „íŠ¸ ê´€ë¦¬ ë° ì¡°ìœ¨<br>
                                â€¢ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìˆ˜ì§‘ ë° í‘œì‹œ
                            </td>
                            <td>8080, 16001, 12000~12009</td>
                        </tr>
                        <tr>
                            <td><strong>Agent</strong></td>
                            <td>
                                â€¢ Controllerì˜ ì§€ì‹œì— ë”°ë¼ ë¶€í•˜ ìƒì„±<br>
                                â€¢ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤/ìŠ¤ë ˆë“œë¡œ ê°€ìƒ ì‚¬ìš©ì ìƒì„±<br>
                                â€¢ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ Controllerì— ì „ì†¡<br>
                                â€¢ ëŒ€ìƒ ì„œë²„ì— HTTP ìš”ì²­ ì „ì†¡
                            </td>
                            <td>ë™ì  í• ë‹¹</td>
                        </tr>
                        <tr>
                            <td><strong>Monitor</strong></td>
                            <td>
                                â€¢ ëŒ€ìƒ ì„œë²„ì˜ ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§ (ì„ íƒì‚¬í•­)<br>
                                â€¢ CPU, Memory, Network ì‚¬ìš©ëŸ‰ ì¸¡ì •
                            </td>
                            <td>13243</td>
                        </tr>
                    </tbody>
                </table>

                <div class="info-box">
                    <strong>ğŸ’¡ í•µì‹¬ ê°œë…</strong><br>
                    <strong>ê°€ìƒ ì‚¬ìš©ì(VUser)</strong> = ì—ì´ì „íŠ¸ Ã— í”„ë¡œì„¸ìŠ¤ Ã— ìŠ¤ë ˆë“œ<br>
                    ì˜ˆ: ì—ì´ì „íŠ¸ 2ê°œ, í”„ë¡œì„¸ìŠ¤ 3ê°œ, ìŠ¤ë ˆë“œ 10ê°œ = ì´ 60ëª…ì˜ ê°€ìƒ ì‚¬ìš©ì
                </div>
            </div>

            <!-- Section 3: Installation -->
            <div class="section" id="installation">
                <h2>3. ì„¤ì¹˜ ë° í™˜ê²½ ì„¤ì •</h2>

                <h3>3.1 ì‚¬ì „ ìš”êµ¬ì‚¬í•­</h3>
                <ul>
                    <li><strong>Java</strong>: JDK 8 ì´ìƒ (OpenJDK ê¶Œì¥)</li>
                    <li><strong>ë©”ëª¨ë¦¬</strong>: ìµœì†Œ 4GB RAM (8GB ê¶Œì¥)</li>
                    <li><strong>OS</strong>: Linux, macOS, Windows ëª¨ë‘ ì§€ì›</li>
                </ul>

                <h3>3.2 Dockerë¥¼ ì´ìš©í•œ ì„¤ì¹˜ (ê¶Œì¥)</h3>
                <p>ê°€ì¥ ë¹ ë¥´ê³  ê°„í¸í•œ ë°©ë²•ì€ Dockerë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>

                <div class="step-container">
                    <div class="step-item">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <strong>Docker Compose íŒŒì¼ ì‘ì„±</strong>
                            <div class="code-block" data-lang="yaml">
version: '3.8'

services:
  controller:
    image: ngrinder/controller:latest
    container_name: ngrinder-controller
    ports:
      - "8080:80"        # ì›¹ ì¸í„°í˜ì´ìŠ¤
      - "16001:16001"    # Agent ì—°ê²° í¬íŠ¸
      - "12000-12009:12000-12009"  # í…ŒìŠ¤íŠ¸ í¬íŠ¸
    volumes:
      - ./ngrinder-controller:/opt/ngrinder-controller
    environment:
      - TZ=Asia/Seoul
    restart: unless-stopped

  agent:
    image: ngrinder/agent:latest
    container_name: ngrinder-agent
    depends_on:
      - controller
    environment:
      - CONTROLLER_ADDR=controller:80
      - TZ=Asia/Seoul
    restart: unless-stopped
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <strong>ì»¨í…Œì´ë„ˆ ì‹¤í–‰</strong>
                            <div class="command-box">
$ docker-compose up -d
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <strong>ì›¹ ì¸í„°í˜ì´ìŠ¤ ì ‘ì†</strong>
                            <p>ë¸Œë¼ìš°ì €ì—ì„œ <code>http://localhost:8080</code> ì ‘ì†</p>
                            <div class="info-box">
                                <strong>ê¸°ë³¸ ê³„ì •</strong><br>
                                ID: admin<br>
                                PW: admin
                            </div>
                        </div>
                    </div>
                </div>

                <h3>3.3 ìˆ˜ë™ ì„¤ì¹˜</h3>

                <div class="step-container">
                    <div class="step-item">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <strong>nGrinder ë‹¤ìš´ë¡œë“œ</strong>
                            <div class="command-box">
# Controller ë‹¤ìš´ë¡œë“œ
wget https://github.com/naver/ngrinder/releases/download/ngrinder-3.5.8-release/ngrinder-controller-3.5.8.war

# Agent ë‹¤ìš´ë¡œë“œ
wget https://github.com/naver/ngrinder/releases/download/ngrinder-3.5.8-release/ngrinder-agent-3.5.8.tar
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <strong>Controller ì‹¤í–‰</strong>
                            <div class="command-box">
# WAR íŒŒì¼ ì‹¤í–‰
java -jar ngrinder-controller-3.5.8.war --port 8080

# ë˜ëŠ” Tomcatì— ë°°í¬
cp ngrinder-controller-3.5.8.war $TOMCAT_HOME/webapps/ngrinder.war
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <strong>Agent ì„¤ì • ë° ì‹¤í–‰</strong>
                            <div class="code-block" data-lang="bash">
# Agent ì••ì¶• í•´ì œ
tar -xvf ngrinder-agent-3.5.8.tar

# __agent.conf íŒŒì¼ ìˆ˜ì •
cd ngrinder-agent
vi __agent.conf

<span class="code-comment"># ë‹¤ìŒ ë‚´ìš© ìˆ˜ì •</span>
agent.controller_host=<span class="code-string">localhost</span>
agent.controller_port=<span class="code-number">80</span>

<span class="code-comment"># Agent ì‹¤í–‰</span>
./run_agent.sh
                            </div>
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ ì£¼ì˜ì‚¬í•­</strong><br>
                    â€¢ Controllerì™€ AgentëŠ” ë„¤íŠ¸ì›Œí¬ë¡œ í†µì‹ í•˜ë¯€ë¡œ ë°©í™”ë²½ ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”.<br>
                    â€¢ í¬íŠ¸ 16001, 12000-12009ê°€ ì—´ë ¤ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.<br>
                    â€¢ Docker í™˜ê²½ì—ì„œëŠ” host.docker.internalì„ ì‚¬ìš©í•˜ì—¬ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹ ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
            </div>

            <!-- Section 4: First Test -->
            <div class="section" id="first-test">
                <h2>4. ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰í•˜ê¸°</h2>

                <p>ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´ ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ë´…ì‹œë‹¤.</p>

                <div class="step-container">
                    <div class="step-item">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <strong>ìŠ¤í¬ë¦½íŠ¸ ìƒì„±</strong>
                            <p>ìƒë‹¨ ë©”ë‰´ì—ì„œ <code>ìŠ¤í¬ë¦½íŠ¸ â†’ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±</code> í´ë¦­</p>
                            <ul>
                                <li>ìŠ¤í¬ë¦½íŠ¸ ì´ë¦„: <code>SimpleTest</code></li>
                                <li>URL: <code>http://example.com</code></li>
                                <li>ìƒì„± ë²„íŠ¼ í´ë¦­</li>
                            </ul>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <strong>í…ŒìŠ¤íŠ¸ ìƒì„±</strong>
                            <p>ìƒë‹¨ ë©”ë‰´ì—ì„œ <code>ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ â†’ í…ŒìŠ¤íŠ¸ ìƒì„±</code> í´ë¦­</p>
                            <ul>
                                <li>í…ŒìŠ¤íŠ¸ëª…: <code>My First Test</code></li>
                                <li>ìŠ¤í¬ë¦½íŠ¸: ë°©ê¸ˆ ìƒì„±í•œ <code>SimpleTest</code> ì„ íƒ</li>
                                <li>ì—ì´ì „íŠ¸: 1</li>
                                <li>ê°€ìƒ ì‚¬ìš©ì: 10</li>
                                <li>í…ŒìŠ¤íŠ¸ ê¸°ê°„: 1ë¶„</li>
                            </ul>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <strong>í…ŒìŠ¤íŠ¸ ì‹¤í–‰</strong>
                            <p><code>ì €ì¥ í›„ ì‹œì‘</code> ë²„íŠ¼ í´ë¦­</p>
                            <div class="success-box">
                                <strong>âœ… ì¶•í•˜í•©ë‹ˆë‹¤!</strong><br>
                                ì²« ë²ˆì§¸ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì‹¤ì‹œê°„ìœ¼ë¡œ TPSì™€ ì‘ë‹µ ì‹œê°„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 5: Script Basics -->
            <div class="section" id="script-basics">
                <h2>5. ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ê¸°ì´ˆ</h2>

                <p>
                    nGrinderëŠ” Groovyì™€ Jython ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œëŠ” 
                    ë” ë§ì´ ì‚¬ìš©ë˜ëŠ” <strong>Groovy</strong>ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.
                </p>

                <h3>5.1 ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ êµ¬ì¡°</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-keyword">import</span> static net.grinder.script.Grinder.grinder
<span class="code-keyword">import</span> static org.junit.Assert.*
<span class="code-keyword">import</span> net.grinder.script.GTest
<span class="code-keyword">import</span> net.grinder.scriptengine.groovy.junit.GrinderRunner
<span class="code-keyword">import</span> net.grinder.scriptengine.groovy.junit.annotation.*
<span class="code-keyword">import</span> org.junit.Test
<span class="code-keyword">import</span> org.junit.runner.RunWith
<span class="code-keyword">import</span> org.ngrinder.http.HTTPRequest
<span class="code-keyword">import</span> org.ngrinder.http.HTTPResponse

<span class="code-comment">/**
 * ê¸°ë³¸ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
 */</span>
@RunWith(GrinderRunner)
<span class="code-keyword">class</span> <span class="code-function">BasicTest</span> {
    
    <span class="code-comment">// ì „ì—­ ë³€ìˆ˜ (ëª¨ë“  ìŠ¤ë ˆë“œê°€ ê³µìœ )</span>
    <span class="code-keyword">public static</span> GTest test
    <span class="code-keyword">public static</span> HTTPRequest request
    
    <span class="code-comment">/**
     * @BeforeProcess: í”„ë¡œì„¸ìŠ¤ ì‹œì‘ ì‹œ 1íšŒ ì‹¤í–‰
     * ëª¨ë“  ìŠ¤ë ˆë“œê°€ ê³µìœ í•  ë¦¬ì†ŒìŠ¤ ì´ˆê¸°í™”
     */</span>
    @BeforeProcess
    <span class="code-keyword">public static void</span> <span class="code-function">beforeProcess</span>() {
        <span class="code-comment">// í…ŒìŠ¤íŠ¸ ê°ì²´ ìƒì„± (í…ŒìŠ¤íŠ¸ ë²ˆí˜¸, í…ŒìŠ¤íŠ¸ ì´ë¦„)</span>
        test = <span class="code-keyword">new</span> GTest(<span class="code-number">1</span>, <span class="code-string">"API Test"</span>)
        
        <span class="code-comment">// HTTP ìš”ì²­ ê°ì²´ ìƒì„±</span>
        request = <span class="code-keyword">new</span> HTTPRequest()
        
        <span class="code-comment">// ë¡œê¹…</span>
        grinder.logger.info(<span class="code-string">"=== Process Started ==="</span>)
    }
    
    <span class="code-comment">/**
     * @BeforeThread: ê° ìŠ¤ë ˆë“œ ì‹œì‘ ì‹œ 1íšŒ ì‹¤í–‰
     * ìŠ¤ë ˆë“œë³„ ì´ˆê¸°í™” ì‘ì—… ìˆ˜í–‰
     */</span>
    @BeforeThread
    <span class="code-keyword">public void</span> <span class="code-function">beforeThread</span>() {
        <span class="code-comment">// í…ŒìŠ¤íŠ¸ ë©”ì„œë“œë¥¼ Grinderì— ë“±ë¡</span>
        test.record(<span class="code-keyword">this</span>, <span class="code-string">"testAPI"</span>)
        
        <span class="code-comment">// í†µê³„ ë³´ê³  ì§€ì—° ì„¤ì •</span>
        grinder.statistics.delayReports = <span class="code-keyword">true</span>
        
        grinder.logger.info(<span class="code-string">"=== Thread Started ==="</span>)
    }
    
    <span class="code-comment">/**
     * @Before: ê° í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ í˜¸ì¶œ
     * í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ê³µí†µìœ¼ë¡œ í•„ìš”í•œ ì„¤ì •
     */</span>
    @Before
    <span class="code-keyword">public void</span> <span class="code-function">before</span>() {
        <span class="code-comment">// í—¤ë” ì„¤ì • ë“±</span>
    }
    
    <span class="code-comment">/**
     * @Test: ì‹¤ì œ í…ŒìŠ¤íŠ¸ ë¡œì§
     * ê° ê°€ìƒ ì‚¬ìš©ìê°€ ë°˜ë³µì ìœ¼ë¡œ ì‹¤í–‰
     */</span>
    @Test
    <span class="code-keyword">public void</span> <span class="code-function">testAPI</span>() {
        <span class="code-comment">// API í˜¸ì¶œ</span>
        HTTPResponse response = request.GET(<span class="code-string">"https://api.example.com/users"</span>)
        
        <span class="code-comment">// ì‘ë‹µ ê²€ì¦</span>
        assertThat(response.statusCode, is(<span class="code-number">200</span>))
    }
    
    <span class="code-comment">/**
     * @After: ê° í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„ í˜¸ì¶œ
     */</span>
    @After
    <span class="code-keyword">public void</span> <span class="code-function">after</span>() {
        <span class="code-comment">// ì •ë¦¬ ì‘ì—…</span>
    }
    
    <span class="code-comment">/**
     * @AfterThread: ê° ìŠ¤ë ˆë“œ ì¢…ë£Œ ì‹œ 1íšŒ ì‹¤í–‰
     */</span>
    @AfterThread
    <span class="code-keyword">public void</span> <span class="code-function">afterThread</span>() {
        grinder.logger.info(<span class="code-string">"=== Thread Finished ==="</span>)
    }
    
    <span class="code-comment">/**
     * @AfterProcess: í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ ì‹œ 1íšŒ ì‹¤í–‰
     */</span>
    @AfterProcess
    <span class="code-keyword">public static void</span> <span class="code-function">afterProcess</span>() {
        grinder.logger.info(<span class="code-string">"=== Process Finished ==="</span>)
    }
}
                </div>

                <h3>5.2 ì‹¤í–‰ ìˆœì„œ ì´í•´í•˜ê¸°</h3>

                <div class="info-box">
                    <strong>ğŸ“Š ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ íë¦„</strong><br><br>
                    <code>@BeforeProcess</code> (1íšŒ) <br>
                    &nbsp;&nbsp;&nbsp;&nbsp;â””â”€ <code>@BeforeThread</code> (ìŠ¤ë ˆë“œë‹¹ 1íšŒ)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â””â”€ <code>@Before</code> (ë§¤ ë°˜ë³µë§ˆë‹¤)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â””â”€ <code>@Test</code> (ë§¤ ë°˜ë³µë§ˆë‹¤)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â””â”€ <code>@After</code> (ë§¤ ë°˜ë³µë§ˆë‹¤)<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;â””â”€ <code>@AfterThread</code> (ìŠ¤ë ˆë“œë‹¹ 1íšŒ)<br>
                    â””â”€ <code>@AfterProcess</code> (1íšŒ)
                </div>

                <h3>5.3 HTTP ìš”ì²­ ë©”ì„œë“œ</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-comment">// GET ìš”ì²­</span>
HTTPResponse response = request.GET(<span class="code-string">"https://api.example.com/users"</span>)

<span class="code-comment">// GET with Query Parameters</span>
response = request.GET(<span class="code-string">"https://api.example.com/users"</span>, [
    [<span class="code-string">"page"</span>, <span class="code-string">"1"</span>],
    [<span class="code-string">"size"</span>, <span class="code-string">"10"</span>]
])

<span class="code-comment">// POST ìš”ì²­</span>
<span class="code-keyword">def</span> body = <span class="code-string">'{"name":"John", "email":"john@example.com"}'</span>
response = request.POST(<span class="code-string">"https://api.example.com/users"</span>, body)

<span class="code-comment">// PUT ìš”ì²­</span>
response = request.PUT(<span class="code-string">"https://api.example.com/users/1"</span>, body)

<span class="code-comment">// DELETE ìš”ì²­</span>
response = request.DELETE(<span class="code-string">"https://api.example.com/users/1"</span>)

<span class="code-comment">// í—¤ë” ì„¤ì •</span>
request.setHeaders([
    <span class="code-string">"Content-Type"</span>: <span class="code-string">"application/json"</span>,
    <span class="code-string">"Authorization"</span>: <span class="code-string">"Bearer token123"</span>
])
                </div>

                <h3>5.4 ì‘ë‹µ ê²€ì¦</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-keyword">import</span> static org.hamcrest.Matchers.*

@Test
<span class="code-keyword">public void</span> <span class="code-function">testWithValidation</span>() {
    HTTPResponse response = request.GET(<span class="code-string">"https://api.example.com/users/1"</span>)
    
    <span class="code-comment">// ìƒíƒœ ì½”ë“œ ê²€ì¦</span>
    assertThat(response.statusCode, is(<span class="code-number">200</span>))
    
    <span class="code-comment">// ì‘ë‹µ ë³¸ë¬¸ ê²€ì¦</span>
    <span class="code-keyword">def</span> body = response.getText()
    assertThat(body, containsString(<span class="code-string">"John"</span>))
    
    <span class="code-comment">// JSON íŒŒì‹± í›„ ê²€ì¦</span>
    <span class="code-keyword">def</span> json = <span class="code-keyword">new</span> groovy.json.JsonSlurper().parseText(body)
    assertThat(json.name, is(<span class="code-string">"John"</span>))
    assertThat(json.email, is(<span class="code-string">"john@example.com"</span>))
    
    <span class="code-comment">// ì‘ë‹µ ì‹œê°„ ê²€ì¦</span>
    <span class="code-keyword">if</span> (response.getTime() > <span class="code-number">1000</span>) {
        grinder.logger.warn(<span class="code-string">"Response time is too slow: ${response.getTime()}ms"</span>)
    }
}
                </div>
            </div>

            <!-- Section 6: Advanced Script -->
            <div class="section" id="advanced-script">
                <h2>6. ê³ ê¸‰ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±</h2>

                <h3>6.1 ëœë¤ ë°ì´í„° ìƒì„±</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-keyword">import</span> java.util.Random

<span class="code-keyword">class</span> <span class="code-function">AdvancedTest</span> {
    <span class="code-keyword">private static</span> Random random = <span class="code-keyword">new</span> Random()
    
    @Test
    <span class="code-keyword">public void</span> <span class="code-function">testWithRandomData</span>() {
        <span class="code-comment">// ëœë¤ ìˆ«ì ìƒì„± (1~100)</span>
        <span class="code-keyword">def</span> userId = random.nextInt(<span class="code-number">100</span>) + <span class="code-number">1</span>
        
        <span class="code-comment">// ëœë¤ ë¬¸ìì—´ ìƒì„±</span>
        <span class="code-keyword">def</span> randomString = UUID.randomUUID().toString()
        
        <span class="code-comment">// API í˜¸ì¶œ</span>
        HTTPResponse response = request.GET(
            <span class="code-string">"https://api.example.com/users/${userId}"</span>
        )
        
        grinder.logger.info(<span class="code-string">"Testing user ID: ${userId}"</span>)
    }
}
                </div>

                <h3>6.2 CSV íŒŒì¼ì—ì„œ ë°ì´í„° ì½ê¸°</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-keyword">import</span> static net.grinder.util.GrinderUtils.getFileFromPath

<span class="code-keyword">class</span> <span class="code-function">CSVTest</span> {
    <span class="code-keyword">private static</span> List&lt;String[]&gt; dataList
    <span class="code-keyword">private static</span> <span class="code-keyword">int</span> dataIndex = <span class="code-number">0</span>
    
    @BeforeProcess
    <span class="code-keyword">public static void</span> <span class="code-function">beforeProcess</span>() {
        <span class="code-comment">// CSV íŒŒì¼ ì½ê¸°</span>
        <span class="code-keyword">def</span> file = getFileFromPath(<span class="code-string">"test_data.csv"</span>)
        dataList = file.readLines().collect { it.split(<span class="code-string">","</span>) }
        
        <span class="code-comment">// í—¤ë” ì œê±°</span>
        dataList.remove(<span class="code-number">0</span>)
        
        grinder.logger.info(<span class="code-string">"Loaded ${dataList.size()} rows from CSV"</span>)
    }
    
    @Test
    <span class="code-keyword">public void</span> <span class="code-function">testWithCSVData</span>() {
        <span class="code-comment">// ìˆœì°¨ì ìœ¼ë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</span>
        <span class="code-keyword">def</span> data = dataList[dataIndex++ % dataList.size()]
        <span class="code-keyword">def</span> username = data[<span class="code-number">0</span>]
        <span class="code-keyword">def</span> email = data[<span class="code-number">1</span>]
        
        <span class="code-comment">// ìš”ì²­ ë³¸ë¬¸ ìƒì„±</span>
        <span class="code-keyword">def</span> body = <span class="code-string">"""
        {
            "username": "${username}",
            "email": "${email}"
        }
        """</span>
        
        <span class="code-comment">// POST ìš”ì²­</span>
        HTTPResponse response = request.POST(
            <span class="code-string">"https://api.example.com/users"</span>, 
            body
        )
        
        assertThat(response.statusCode, is(<span class="code-number">201</span>))
    }
}
                </div>

                <h3>6.3 ì¿ í‚¤ ë° ì„¸ì…˜ ê´€ë¦¬</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-keyword">import</span> org.ngrinder.http.cookie.CookieManager
<span class="code-keyword">import</span> org.ngrinder.http.cookie.Cookie

<span class="code-keyword">class</span> <span class="code-function">SessionTest</span> {
    <span class="code-keyword">private</span> CookieManager cookieManager
    
    @BeforeThread
    <span class="code-keyword">public void</span> <span class="code-function">beforeThread</span>() {
        cookieManager = <span class="code-keyword">new</span> CookieManager()
        request.setCookieManager(cookieManager)
    }
    
    @Test
    <span class="code-keyword">public void</span> <span class="code-function">testWithLogin</span>() {
        <span class="code-comment">// 1. ë¡œê·¸ì¸</span>
        <span class="code-keyword">def</span> loginBody = <span class="code-string">'{"username":"test","password":"test123"}'</span>
        HTTPResponse loginResponse = request.POST(
            <span class="code-string">"https://api.example.com/auth/login"</span>,
            loginBody
        )
        
        <span class="code-comment">// ì¿ í‚¤ ìë™ ì €ì¥ë¨</span>
        grinder.logger.info(<span class="code-string">"Cookies: ${cookieManager.allCookies}"</span>)
        
        <span class="code-comment">// 2. ì¸ì¦ì´ í•„ìš”í•œ API í˜¸ì¶œ (ìë™ìœ¼ë¡œ ì¿ í‚¤ ì „ì†¡)</span>
        HTTPResponse response = request.GET(
            <span class="code-string">"https://api.example.com/profile"</span>
        )
        
        assertThat(response.statusCode, is(<span class="code-number">200</span>))
    }
}
                </div>

                <h3>6.4 ì¡°ê±´ë¶€ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-keyword">class</span> <span class="code-function">ConditionalTest</span> {
    <span class="code-keyword">private static</span> Random random = <span class="code-keyword">new</span> Random()
    
    @Test
    <span class="code-keyword">public void</span> <span class="code-function">testMixedScenario</span>() {
        <span class="code-comment">// 70% GET, 20% POST, 10% DELETE</span>
        <span class="code-keyword">def</span> scenario = random.nextInt(<span class="code-number">100</span>)
        
        <span class="code-keyword">if</span> (scenario < <span class="code-number">70</span>) {
            <span class="code-comment">// ì¡°íšŒ (70%)</span>
            <span class="code-keyword">def</span> userId = random.nextInt(<span class="code-number">100</span>) + <span class="code-number">1</span>
            HTTPResponse response = request.GET(
                <span class="code-string">"https://api.example.com/users/${userId}"</span>
            )
            assertThat(response.statusCode, is(<span class="code-number">200</span>))
            
        } <span class="code-keyword">else if</span> (scenario < <span class="code-number">90</span>) {
            <span class="code-comment">// ìƒì„± (20%)</span>
            <span class="code-keyword">def</span> body = <span class="code-string">'{"name":"NewUser","email":"new@example.com"}'</span>
            HTTPResponse response = request.POST(
                <span class="code-string">"https://api.example.com/users"</span>,
                body
            )
            assertThat(response.statusCode, is(<span class="code-number">201</span>))
            
        } <span class="code-keyword">else</span> {
            <span class="code-comment">// ì‚­ì œ (10%)</span>
            <span class="code-keyword">def</span> userId = random.nextInt(<span class="code-number">100</span>) + <span class="code-number">1</span>
            HTTPResponse response = request.DELETE(
                <span class="code-string">"https://api.example.com/users/${userId}"</span>
            )
            assertThat(response.statusCode, anyOf(is(<span class="code-number">200</span>), is(<span class="code-number">204</span>)))
        }
    }
}
                </div>

                <h3>6.5 Spring Boot + JPA ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸ (ì‹¤ì „ ì˜ˆì œ)</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-keyword">import</span> static net.grinder.script.Grinder.grinder
<span class="code-keyword">import</span> static org.junit.Assert.*
<span class="code-keyword">import</span> static org.hamcrest.Matchers.*
<span class="code-keyword">import</span> net.grinder.script.GTest
<span class="code-keyword">import</span> net.grinder.scriptengine.groovy.junit.GrinderRunner
<span class="code-keyword">import</span> net.grinder.scriptengine.groovy.junit.annotation.*
<span class="code-keyword">import</span> org.junit.Test
<span class="code-keyword">import</span> org.junit.runner.RunWith
<span class="code-keyword">import</span> org.ngrinder.http.HTTPRequest
<span class="code-keyword">import</span> org.ngrinder.http.HTTPResponse

<span class="code-comment">/**
 * Spring Boot REST API ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
 * - ìƒí’ˆ ì¡°íšŒ API í…ŒìŠ¤íŠ¸
 * - JPA N+1 ë¬¸ì œ ê²€ì¦
 * - ì‘ë‹µ ì‹œê°„ ëª¨ë‹ˆí„°ë§
 */</span>
@RunWith(GrinderRunner)
<span class="code-keyword">class</span> <span class="code-function">ProductAPITest</span> {
    
    <span class="code-keyword">public static</span> GTest test
    <span class="code-keyword">public static</span> HTTPRequest request
    <span class="code-keyword">public static</span> Map&lt;String, String&gt; headers = [:]
    
    <span class="code-comment">// í…ŒìŠ¤íŠ¸ í†µê³„</span>
    <span class="code-keyword">private static</span> <span class="code-keyword">int</span> slowQueryCount = <span class="code-number">0</span>
    <span class="code-keyword">private static</span> <span class="code-keyword">int</span> totalRequests = <span class="code-number">0</span>
    
    @BeforeProcess
    <span class="code-keyword">public static void</span> <span class="code-function">beforeProcess</span>() {
        <span class="code-comment">// HTTP íƒ€ì„ì•„ì›ƒ ì„¤ì • (5ë¶„)</span>
        HTTPRequestControl.setConnectionTimeout(<span class="code-number">300000</span>)
        
        test = <span class="code-keyword">new</span> GTest(<span class="code-number">1</span>, <span class="code-string">"Product API Test"</span>)
        request = <span class="code-keyword">new</span> HTTPRequest()
        
        <span class="code-comment">// ê³µí†µ í—¤ë” ì„¤ì •</span>
        headers[<span class="code-string">"Content-Type"</span>] = <span class="code-string">"application/json"</span>
        headers[<span class="code-string">"Accept"</span>] = <span class="code-string">"application/json"</span>
        
        grinder.logger.info(<span class="code-string">"=== Test Process Started ==="</span>)
    }
    
    @BeforeThread
    <span class="code-keyword">public void</span> <span class="code-function">beforeThread</span>() {
        test.record(<span class="code-keyword">this</span>, <span class="code-string">"testGetProduct"</span>)
        grinder.statistics.delayReports = <span class="code-keyword">true</span>
        grinder.logger.info(<span class="code-string">"=== Thread ${grinder.threadNumber} Started ==="</span>)
    }
    
    @Before
    <span class="code-keyword">public void</span> <span class="code-function">before</span>() {
        request.setHeaders(headers)
    }
    
    @Test
    <span class="code-keyword">public void</span> <span class="code-function">testGetProduct</span>() {
        <span class="code-comment">// ëœë¤ ìƒí’ˆ ID (1~100)</span>
        <span class="code-keyword">def</span> productId = (<span class="code-keyword">new</span> Random().nextInt(<span class="code-number">100</span>) + <span class="code-number">1</span>)
        
        <span class="code-comment">// ìš”ì²­ ì‹œì‘ ì‹œê°„</span>
        <span class="code-keyword">def</span> startTime = System.currentTimeMillis()
        
        <span class="code-comment">// API í˜¸ì¶œ (Docker í™˜ê²½ì—ì„œ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹  ì ‘ê·¼)</span>
        HTTPResponse response = request.GET(
            <span class="code-string">"http://host.docker.internal:8080/api/v1/products/${productId}"</span>
        )
        
        <span class="code-comment">// ì‘ë‹µ ì‹œê°„ ê³„ì‚°</span>
        <span class="code-keyword">def</span> responseTime = System.currentTimeMillis() - startTime
        totalRequests++
        
        <span class="code-comment">// ì‘ë‹µ ì½”ë“œ ê²€ì¦</span>
        <span class="code-keyword">if</span> (response.statusCode == <span class="code-number">301</span> || response.statusCode == <span class="code-number">302</span>) {
            grinder.logger.warn(<span class="code-string">"Redirect detected: ${response.statusCode}"</span>)
        } <span class="code-keyword">else</span> {
            assertThat(response.statusCode, is(<span class="code-number">200</span>))
        }
        
        <span class="code-comment">// ì‘ë‹µ ë³¸ë¬¸ íŒŒì‹± (ì„ íƒì )</span>
        <span class="code-keyword">try</span> {
            <span class="code-keyword">def</span> json = <span class="code-keyword">new</span> groovy.json.JsonSlurper().parseText(response.getText())
            
            <span class="code-comment">// í•„ìˆ˜ í•„ë“œ ê²€ì¦</span>
            assertThat(json.id, notNullValue())
            assertThat(json.name, notNullValue())
            
        } <span class="code-keyword">catch</span> (Exception e) {
            grinder.logger.error(<span class="code-string">"JSON Parse Error: ${e.message}"</span>)
        }
        
        <span class="code-comment">// ëŠë¦° ì¿¼ë¦¬ ê°ì§€ (1ì´ˆ ì´ìƒ)</span>
        <span class="code-keyword">if</span> (responseTime > <span class="code-number">1000</span>) {
            slowQueryCount++
            grinder.logger.warn(
                <span class="code-string">"Slow Query Detected - Product ID: ${productId}, "</span> +
                <span class="code-string">"Time: ${responseTime}ms"</span>
            )
        }
        
        <span class="code-comment">// 100ê°œ ìš”ì²­ë§ˆë‹¤ í†µê³„ ì¶œë ¥</span>
        <span class="code-keyword">if</span> (totalRequests % <span class="code-number">100</span> == <span class="code-number">0</span>) {
            <span class="code-keyword">def</span> slowPercentage = (slowQueryCount / totalRequests * <span class="code-number">100</span>).round(<span class="code-number">2</span>)
            grinder.logger.info(
                <span class="code-string">"Stats - Total: ${totalRequests}, "</span> +
                <span class="code-string">"Slow: ${slowQueryCount} (${slowPercentage}%)"</span>
            )
        }
    }
    
    @AfterThread
    <span class="code-keyword">public void</span> <span class="code-function">afterThread</span>() {
        grinder.logger.info(<span class="code-string">"=== Thread ${grinder.threadNumber} Finished ==="</span>)
    }
    
    @AfterProcess
    <span class="code-keyword">public static void</span> <span class="code-function">afterProcess</span>() {
        grinder.logger.info(<span class="code-string">"=== Final Stats ==="</span>)
        grinder.logger.info(<span class="code-string">"Total Requests: ${totalRequests}"</span>)
        grinder.logger.info(<span class="code-string">"Slow Queries: ${slowQueryCount}"</span>)
        
        <span class="code-keyword">if</span> (totalRequests > <span class="code-number">0</span>) {
            <span class="code-keyword">def</span> slowPercentage = (slowQueryCount / totalRequests * <span class="code-number">100</span>).round(<span class="code-number">2</span>)
            grinder.logger.info(<span class="code-string">"Slow Query Ratio: ${slowPercentage}%"</span>)
        }
    }
}
                </div>
            </div>

            <!-- Section 7: Test Configuration -->
            <div class="section" id="test-config">
                <h2>7. í…ŒìŠ¤íŠ¸ ì„¤ì • ì™„ë²½ ê°€ì´ë“œ</h2>

                <h3>7.1 ê¸°ë³¸ ì„¤ì • í•­ëª©</h3>

                <table>
                    <thead>
                        <tr>
                            <th>í•­ëª©</th>
                            <th>ì„¤ëª…</th>
                            <th>ê¶Œì¥ê°’</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ì—ì´ì „íŠ¸</strong></td>
                            <td>í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ë¬¼ë¦¬ì  ë¨¸ì‹  ìˆ˜</td>
                            <td>1~10 (ë¶€í•˜ì— ë”°ë¼ ì¡°ì •)</td>
                        </tr>
                        <tr>
                            <td><strong>ê°€ìƒ ì‚¬ìš©ì</strong></td>
                            <td>ë™ì‹œ ì ‘ì† ì‚¬ìš©ì ìˆ˜ (ì´ ìŠ¤ë ˆë“œ ìˆ˜)</td>
                            <td>100~1000</td>
                        </tr>
                        <tr>
                            <td><strong>í”„ë¡œì„¸ìŠ¤</strong></td>
                            <td>ì—ì´ì „íŠ¸ë‹¹ ìƒì„±í•  JVM í”„ë¡œì„¸ìŠ¤ ìˆ˜</td>
                            <td>2~4</td>
                        </tr>
                        <tr>
                            <td><strong>ìŠ¤ë ˆë“œ</strong></td>
                            <td>í”„ë¡œì„¸ìŠ¤ë‹¹ ìƒì„±í•  ìŠ¤ë ˆë“œ ìˆ˜</td>
                            <td>50~100</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box">
                    <strong>ğŸ’¡ ì„¤ì • íŒ</strong><br>
                    â€¢ ê°€ìƒ ì‚¬ìš©ì = ì—ì´ì „íŠ¸ Ã— í”„ë¡œì„¸ìŠ¤ Ã— ìŠ¤ë ˆë“œ<br>
                    â€¢ í”„ë¡œì„¸ìŠ¤ë¥¼ ì—¬ëŸ¬ ê°œë¡œ ë‚˜ëˆ„ë©´ GC ì˜í–¥ì„ ë¶„ì‚°ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤<br>
                    â€¢ ìŠ¤ë ˆë“œë‹¹ ë©”ëª¨ë¦¬ë¥¼ ê³ ë ¤í•˜ì—¬ ì ì ˆíˆ ë°°ë¶„í•˜ì„¸ìš”
                </div>

                <h3>7.2 Ramp-Up ì„¤ì •</h3>

                <p>
                    Ramp-Upì€ ê°€ìƒ ì‚¬ìš©ìë¥¼ ì ì§„ì ìœ¼ë¡œ ì¦ê°€ì‹œì¼œ ì‹œìŠ¤í…œì— ê¸‰ê²©í•œ ë¶€í•˜ë¥¼ ì£¼ì§€ ì•Šê³  
                    ì•ˆì •ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.
                </p>

                <table>
                    <thead>
                        <tr>
                            <th>ì„¤ì •</th>
                            <th>ì„¤ëª…</th>
                            <th>ì˜ˆì‹œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ì´ˆê¸° ê°œìˆ˜</strong></td>
                            <td>í…ŒìŠ¤íŠ¸ ì‹œì‘ ì‹œ ê°€ìƒ ì‚¬ìš©ì ìˆ˜</td>
                            <td>0 ë˜ëŠ” 10</td>
                        </tr>
                        <tr>
                            <td><strong>ì¦ê°€ ë‹¨ìœ„</strong></td>
                            <td>í•œ ë²ˆì— ì¦ê°€ì‹œí‚¬ ì‚¬ìš©ì ìˆ˜</td>
                            <td>1~10</td>
                        </tr>
                        <tr>
                            <td><strong>Ramp-Up ì£¼ê¸°</strong></td>
                            <td>ì¦ê°€ ê°„ê²© (ë°€ë¦¬ì´ˆ)</td>
                            <td>1000 (1ì´ˆ)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="info-box">
                    <strong>ğŸ“ˆ Ramp-Up ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ</strong><br><br>
                    <strong>ì‹œë‚˜ë¦¬ì˜¤:</strong> 0ëª… â†’ 100ëª… (10ëª…ì”© ì¦ê°€)<br>
                    â€¢ ì´ˆê¸° ê°œìˆ˜: 0<br>
                    â€¢ ì¦ê°€ ë‹¨ìœ„: 10<br>
                    â€¢ Ramp-Up ì£¼ê¸°: 5000ms (5ì´ˆ)<br>
                    â€¢ ê²°ê³¼: ì´ 50ì´ˆì— ê±¸ì³ 100ëª…ê¹Œì§€ ì¦ê°€
                </div>

                <h3>7.3 í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ì‹</h3>

                <div class="comparison-table">
                    <div class="comparison-card">
                        <h4>â±ï¸ í…ŒìŠ¤íŠ¸ ê¸°ê°„</h4>
                        <p>ì§€ì •ëœ ì‹œê°„ ë™ì•ˆ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
                        <ul>
                            <li>ì˜ˆ: 2ë¶„, 10ë¶„, 1ì‹œê°„</li>
                            <li>Endurance í…ŒìŠ¤íŠ¸ì— ì í•©</li>
                            <li>ì‹œê°„ì´ ëë‚˜ë©´ ìë™ ì¢…ë£Œ</li>
                        </ul>
                    </div>
                    <div class="comparison-card">
                        <h4>ğŸ”„ ì‹¤í–‰ íšŸìˆ˜</h4>
                        <p>ê° ìŠ¤ë ˆë“œê°€ ì‹¤í–‰í•  ì´ íšŸìˆ˜ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.</p>
                        <ul>
                            <li>ì˜ˆ: 1000íšŒ, 10000íšŒ</li>
                            <li>ì •í™•í•œ ìš”ì²­ ìˆ˜ê°€ ì¤‘ìš”í•œ ê²½ìš°</li>
                            <li>ëª¨ë“  ìŠ¤ë ˆë“œê°€ ì™„ë£Œë˜ë©´ ì¢…ë£Œ</li>
                        </ul>
                    </div>
                </div>

                <h3>7.4 ìµœì ì˜ ì„¤ì • ì°¾ê¸°</h3>

                <div class="step-container">
                    <div class="step-item">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <strong>Baseline í…ŒìŠ¤íŠ¸</strong>
                            <p>ì†Œìˆ˜ì˜ ì‚¬ìš©ì(10~50ëª…)ë¡œ ì‹œì‘í•˜ì—¬ ì‹œìŠ¤í…œì˜ ê¸°ë³¸ ì„±ëŠ¥ì„ ì¸¡ì •í•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <strong>ë¶€í•˜ ì¦ê°€ í…ŒìŠ¤íŠ¸</strong>
                            <p>ì ì§„ì ìœ¼ë¡œ ì‚¬ìš©ì ìˆ˜ë¥¼ ëŠ˜ë ¤ê°€ë©° ì‹œìŠ¤í…œì˜ í•œê³„ì ì„ ì°¾ìŠµë‹ˆë‹¤.</p>
                            <ul>
                                <li>50ëª… â†’ 100ëª… â†’ 200ëª… â†’ 500ëª…</li>
                                <li>TPSì™€ ì‘ë‹µì‹œê°„ì„ ê´€ì°°</li>
                                <li>ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ì§€ì  íŒŒì•…</li>
                            </ul>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <strong>ì•ˆì •ì„± í…ŒìŠ¤íŠ¸</strong>
                            <p>ëª©í‘œ ë¶€í•˜ë¡œ ì¥ì‹œê°„(30ë¶„~1ì‹œê°„) í…ŒìŠ¤íŠ¸í•˜ì—¬ ì•ˆì •ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 8: Result Analysis -->
            <div class="section" id="result-analysis">
                <h2>8. ê²°ê³¼ ë¶„ì„í•˜ê¸°</h2>

                <h3>8.1 ì£¼ìš” ì„±ëŠ¥ ì§€í‘œ</h3>

                <table>
                    <thead>
                        <tr>
                            <th>ì§€í‘œ</th>
                            <th>ì˜ë¯¸</th>
                            <th>ì¢‹ì€ ê°’</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>TPS</strong><br>(Transactions Per Second)</td>
                            <td>ì´ˆë‹¹ ì²˜ë¦¬í•œ íŠ¸ëœì­ì…˜ ìˆ˜<br>ì‹œìŠ¤í…œì˜ ì²˜ë¦¬ëŸ‰ì„ ë‚˜íƒ€ëƒ„</td>
                            <td>ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ<br>ì•ˆì •ì ì¼ìˆ˜ë¡ ì¢‹ìŒ</td>
                        </tr>
                        <tr>
                            <td><strong>í‰ê·  ì‘ë‹µì‹œê°„</strong></td>
                            <td>ìš”ì²­ë¶€í„° ì‘ë‹µê¹Œì§€ ê±¸ë¦° í‰ê·  ì‹œê°„</td>
                            <td>
                                â€¢ API: < 200ms<br>
                                â€¢ ì›¹í˜ì´ì§€: < 1s<br>
                                â€¢ ë³µì¡í•œ ì¡°íšŒ: < 3s
                            </td>
                        </tr>
                        <tr>
                            <td><strong>ì—ëŸ¬ìœ¨</strong></td>
                            <td>ì „ì²´ ìš”ì²­ ì¤‘ ì‹¤íŒ¨í•œ ìš”ì²­ì˜ ë¹„ìœ¨</td>
                            <td>< 0.1% (ê±°ì˜ 0ì— ê°€ê¹Œì›Œì•¼ í•¨)</td>
                        </tr>
                        <tr>
                            <td><strong>ì´ ì‹¤í–‰ í…ŒìŠ¤íŠ¸</strong></td>
                            <td>í…ŒìŠ¤íŠ¸ ê¸°ê°„ ë™ì•ˆ ì‹¤í–‰ëœ ì´ ìš”ì²­ ìˆ˜</td>
                            <td>ì¶©ë¶„í•œ ìƒ˜í”Œ í™•ë³´ (> 1000)</td>
                        </tr>
                        <tr>
                            <td><strong>ìµœê³  TPS</strong></td>
                            <td>í”¼í¬ ì‹œì ì˜ ìµœëŒ€ ì²˜ë¦¬ëŸ‰</td>
                            <td>í‰ê·  TPSì˜ 1.2~1.5ë°°</td>
                        </tr>
                    </tbody>
                </table>

                <h3>8.2 ê·¸ë˜í”„ í•´ì„</h3>

                <h4>TPS ê·¸ë˜í”„ íŒ¨í„´</h4>

                <div class="highlight-box">
                    <strong>âœ… ì¢‹ì€ íŒ¨í„´</strong><br>
                    â€¢ ì¼ì •í•œ ìˆ˜í‰ì„ : ì•ˆì •ì ì¸ ì²˜ë¦¬ëŸ‰<br>
                    â€¢ ì™„ë§Œí•œ ì¦ê°€: ì‹œìŠ¤í…œì´ ë¶€í•˜ë¥¼ ì˜ ì²˜ë¦¬<br>
                    â€¢ ì‘ì€ ë³€ë™: ì •ìƒì ì¸ ë²”ìœ„ì˜ í”ë“¤ë¦¼
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ ë‚˜ìœ íŒ¨í„´</strong><br>
                    â€¢ ê¸‰ê²©í•œ í•˜ë½: ì‹œìŠ¤í…œ ë³‘ëª©, GC, DB ë¬¸ì œ<br>
                    â€¢ í†±ë‹ˆ ëª¨ì–‘: ë¶ˆì•ˆì •í•œ ì‹œìŠ¤í…œ<br>
                    â€¢ ì§€ì†ì ì¸ í•˜ë½: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ê³ ê°ˆ
                </div>

                <h3>8.3 ë¬¸ì œ ì§„ë‹¨ ê°€ì´ë“œ</h3>

                <table>
                    <thead>
                        <tr>
                            <th>ì¦ìƒ</th>
                            <th>ê°€ëŠ¥í•œ ì›ì¸</th>
                            <th>í•´ê²° ë°©ì•ˆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ë†’ì€ ì‘ë‹µì‹œê°„<br>(> 1ì´ˆ)</td>
                            <td>
                                â€¢ ëŠë¦° DB ì¿¼ë¦¬<br>
                                â€¢ N+1 ë¬¸ì œ<br>
                                â€¢ ì™¸ë¶€ API ì§€ì—°
                            </td>
                            <td>
                                â€¢ ì¿¼ë¦¬ ìµœì í™”<br>
                                â€¢ EntityGraph ì‚¬ìš©<br>
                                â€¢ ìºì‹± ì ìš©
                            </td>
                        </tr>
                        <tr>
                            <td>TPS ê¸‰ë½</td>
                            <td>
                                â€¢ GC ë°œìƒ<br>
                                â€¢ Connection Pool ê³ ê°ˆ<br>
                                â€¢ CPU 100%
                            </td>
                            <td>
                                â€¢ Heap í¬ê¸° ì¡°ì •<br>
                                â€¢ Connection Pool ì¦ê°€<br>
                                â€¢ ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤ì¼€ì¼ì•„ì›ƒ
                            </td>
                        </tr>
                        <tr>
                            <td>ë†’ì€ ì—ëŸ¬ìœ¨</td>
                            <td>
                                â€¢ íƒ€ì„ì•„ì›ƒ<br>
                                â€¢ 500 ì—ëŸ¬<br>
                                â€¢ Connection refused
                            </td>
                            <td>
                                â€¢ íƒ€ì„ì•„ì›ƒ ì„¤ì • ì¡°ì •<br>
                                â€¢ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ í™•ì¸<br>
                                â€¢ ì¸í”„ë¼ ë¦¬ì†ŒìŠ¤ ì¦ì„¤
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h3>8.4 ì‹¤ì „ ë¶„ì„ ì˜ˆì‹œ</h3>

                <div class="code-block" data-lang="text">
<span class="code-comment"># í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìƒ˜í”Œ</span>
ì´ Vuser: <span class="code-number">99</span>
TPS: <span class="code-number">187.8</span>
ìµœê³  TPS: <span class="code-number">225.0</span>
í‰ê·  ì‘ë‹µì‹œê°„: <span class="code-number">533.31</span> ms
ì—ëŸ¬: <span class="code-number">0</span>

<span class="code-comment"># ë¶„ì„</span>
<span class="code-string">âœ… ê¸ì •ì  ì§€í‘œ:</span>
- 0% ì—ëŸ¬ìœ¨ë¡œ ì•ˆì •ì 
- 187.8 TPSë¡œ ì¶©ë¶„í•œ ì²˜ë¦¬ëŸ‰
- í‰ê·  ì‘ë‹µì‹œê°„ 533ms (ëª©í‘œ 1ì´ˆ ì´ë‚´)

<span class="code-string">âš ï¸ ê°œì„  í¬ì¸íŠ¸:</span>
- ì‘ë‹µì‹œê°„ 300ms ì´í•˜ë¡œ ê°œì„  í•„ìš”
- TPS ê·¸ë˜í”„ì—ì„œ ì¼ë¶€ ë³€ë™ ë°œê²¬
- 00:24 êµ¬ê°„ ê¸‰ë½ ì›ì¸ ë¶„ì„ í•„ìš”

<span class="code-string">ğŸ“‹ ì•¡ì…˜ ì•„ì´í…œ:</span>
1. ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ í™•ì¸
2. GC ë¡œê·¸ ë¶„ì„
3. DB ìŠ¬ë¡œìš° ì¿¼ë¦¬ ê²€í† 
4. ìºì‹± ì „ëµ ìˆ˜ë¦½
                </div>
            </div>

            <!-- Section 9: Best Practices -->
            <div class="section" id="best-practices">
                <h2>9. Best Practices</h2>

                <h3>9.1 ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±</h3>

                <ul>
                    <li><strong>í•œ ìŠ¤í¬ë¦½íŠ¸ì— í•˜ë‚˜ì˜ ì‹œë‚˜ë¦¬ì˜¤</strong>: ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ê³  ëª…í™•í•˜ê²Œ ìœ ì§€</li>
                    <li><strong>ì ì ˆí•œ ë¡œê¹…</strong>: ë””ë²„ê¹…ì„ ìœ„í•´ ì¤‘ìš”í•œ ì •ë³´ë§Œ ë¡œê¹…</li>
                    <li><strong>ì—ëŸ¬ ì²˜ë¦¬</strong>: try-catchë¡œ ì˜ˆì™¸ ì²˜ë¦¬í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì•ˆì •ì„± í™•ë³´</li>
                    <li><strong>ë°ì´í„° ê²©ë¦¬</strong>: í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì„¤ê³„</li>
                    <li><strong>ì‘ë‹µ ê²€ì¦</strong>: ë‹¨ìˆœíˆ ìƒíƒœ ì½”ë“œë§Œ í™•ì¸í•˜ì§€ ë§ê³  ì‘ë‹µ ë‚´ìš©ë„ ê²€ì¦</li>
                </ul>

                <div class="code-block" data-lang="groovy">
<span class="code-comment">// âŒ ë‚˜ìœ ì˜ˆ - ë„ˆë¬´ ë§ì€ ë¡œê¹…</span>
@Test
<span class="code-keyword">public void</span> <span class="code-function">badTest</span>() {
    grinder.logger.info(<span class="code-string">"Starting test"</span>)
    grinder.logger.info(<span class="code-string">"Making request"</span>)
    <span class="code-keyword">def</span> response = request.GET(url)
    grinder.logger.info(<span class="code-string">"Got response: ${response.getText()}"</span>)
    grinder.logger.info(<span class="code-string">"Test completed"</span>)
}

<span class="code-comment">// âœ… ì¢‹ì€ ì˜ˆ - í•„ìš”í•œ ì •ë³´ë§Œ ë¡œê¹…</span>
@Test
<span class="code-keyword">public void</span> <span class="code-function">goodTest</span>() {
    <span class="code-keyword">try</span> {
        <span class="code-keyword">def</span> response = request.GET(url)
        
        <span class="code-keyword">if</span> (response.statusCode != <span class="code-number">200</span>) {
            grinder.logger.warn(<span class="code-string">"Unexpected status: ${response.statusCode}"</span>)
        }
        
        assertThat(response.statusCode, is(<span class="code-number">200</span>))
        
    } <span class="code-keyword">catch</span> (Exception e) {
        grinder.logger.error(<span class="code-string">"Test failed: ${e.message}"</span>)
        <span class="code-keyword">throw</span> e
    }
}
                </div>

                <h3>9.2 í…ŒìŠ¤íŠ¸ ì„¤ê³„</h3>

                <ul>
                    <li><strong>ì ì§„ì  ì ‘ê·¼</strong>: ì‘ì€ ë¶€í•˜ë¶€í„° ì‹œì‘í•˜ì—¬ ì ì°¨ ì¦ê°€</li>
                    <li><strong>í˜„ì‹¤ì ì¸ ì‹œë‚˜ë¦¬ì˜¤</strong>: ì‹¤ì œ ì‚¬ìš©ì í–‰ë™ì„ ëª¨ë°©</li>
                    <li><strong>ì¶©ë¶„í•œ Warm-up</strong>: ì‹œìŠ¤í…œì´ ì•ˆì •í™”ë  ì‹œê°„ ì œê³µ</li>
                    <li><strong>ë°˜ë³µ í…ŒìŠ¤íŠ¸</strong>: ì¼íšŒì„±ì´ ì•„ë‹Œ ë°˜ë³µ í…ŒìŠ¤íŠ¸ë¡œ ì‹ ë¢°ì„± í™•ë³´</li>
                    <li><strong>í”„ë¡œë•ì…˜ê³¼ ë™ì¼í•œ í™˜ê²½</strong>: ê°€ëŠ¥í•œ í•œ ìš´ì˜ í™˜ê²½ê³¼ ìœ ì‚¬í•˜ê²Œ êµ¬ì„±</li>
                </ul>

                <h3>9.3 ëª¨ë‹ˆí„°ë§</h3>

                <div class="info-box">
                    <strong>ğŸ“Š ë™ì‹œ ëª¨ë‹ˆí„°ë§ ê¶Œì¥ í•­ëª©</strong><br><br>
                    <strong>ì• í”Œë¦¬ì¼€ì´ì…˜:</strong><br>
                    â€¢ GC ì‹œê°„ ë° ë¹ˆë„<br>
                    â€¢ Heap ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰<br>
                    â€¢ Thread Pool ìƒíƒœ<br>
                    â€¢ Connection Pool ì‚¬ìš©ë¥ <br><br>
                    
                    <strong>ë°ì´í„°ë² ì´ìŠ¤:</strong><br>
                    â€¢ í™œì„± ì»¤ë„¥ì…˜ ìˆ˜<br>
                    â€¢ ìŠ¬ë¡œìš° ì¿¼ë¦¬ ë¡œê·¸<br>
                    â€¢ Lock ëŒ€ê¸° ì‹œê°„<br>
                    â€¢ ìºì‹œ íˆíŠ¸ìœ¨<br><br>
                    
                    <strong>ì¸í”„ë¼:</strong><br>
                    â€¢ CPU ì‚¬ìš©ë¥ <br>
                    â€¢ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ <br>
                    â€¢ ë„¤íŠ¸ì›Œí¬ I/O<br>
                    â€¢ ë””ìŠ¤í¬ I/O
                </div>

                <h3>9.4 Spring Boot + JPA ìµœì í™” ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>

                <div class="code-block" data-lang="properties">
<span class="code-comment"># 1. HikariCP ì„¤ì • ìµœì í™”</span>
spring.datasource.hikari.maximum-pool-size=<span class="code-number">20</span>
spring.datasource.hikari.minimum-idle=<span class="code-number">10</span>
spring.datasource.hikari.connection-timeout=<span class="code-number">30000</span>
spring.datasource.hikari.idle-timeout=<span class="code-number">600000</span>
spring.datasource.hikari.max-lifetime=<span class="code-number">1800000</span>

<span class="code-comment"># 2. JPA ë°°ì¹˜ ì²˜ë¦¬</span>
spring.jpa.properties.hibernate.jdbc.batch_size=<span class="code-number">50</span>
spring.jpa.properties.hibernate.order_inserts=<span class="code-keyword">true</span>
spring.jpa.properties.hibernate.order_updates=<span class="code-keyword">true</span>

<span class="code-comment"># 3. 2ì°¨ ìºì‹œ í™œì„±í™”</span>
spring.jpa.properties.hibernate.cache.use_second_level_cache=<span class="code-keyword">true</span>
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.jcache.JCacheRegionFactory

<span class="code-comment"># 4. ì¿¼ë¦¬ ë¡œê¹… (ê°œë°œ í™˜ê²½)</span>
spring.jpa.show-sql=<span class="code-keyword">true</span>
spring.jpa.properties.hibernate.format_sql=<span class="code-keyword">true</span>
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=<span class="code-string">TRACE</span>
                </div>

                <div class="code-block" data-lang="java">
<span class="code-comment">// N+1 ë¬¸ì œ í•´ê²°</span>

<span class="code-comment">// âŒ ë‚˜ìœ ì˜ˆ - N+1 ë°œìƒ</span>
@GetMapping(<span class="code-string">"/products"</span>)
<span class="code-keyword">public</span> List&lt;ProductDto&gt; <span class="code-function">getProducts</span>() {
    <span class="code-keyword">return</span> productRepository.findAll()
        .stream()
        .map(ProductDto::<span class="code-keyword">new</span>)
        .collect(Collectors.toList());
}

<span class="code-comment">// âœ… ì¢‹ì€ ì˜ˆ - EntityGraph ì‚¬ìš©</span>
<span class="code-keyword">public interface</span> <span class="code-function">ProductRepository</span> <span class="code-keyword">extends</span> JpaRepository&lt;Product, Long&gt; {
    
    @EntityGraph(attributePaths = {<span class="code-string">"category"</span>, <span class="code-string">"supplier"</span>})
    List&lt;Product&gt; <span class="code-function">findAll</span>();
    
    <span class="code-comment">// ë˜ëŠ” Fetch Join ì‚¬ìš©</span>
    @Query(<span class="code-string">"SELECT p FROM Product p JOIN FETCH p.category JOIN FETCH p.supplier"</span>)
    List&lt;Product&gt; <span class="code-function">findAllWithRelations</span>();
}

<span class="code-comment">// ìºì‹± ì ìš©</span>
@Service
<span class="code-keyword">public class</span> <span class="code-function">ProductService</span> {
    
    @Cacheable(value = <span class="code-string">"products"</span>, key = <span class="code-string">"#id"</span>)
    <span class="code-keyword">public</span> Product <span class="code-function">getProduct</span>(Long id) {
        <span class="code-keyword">return</span> productRepository.findById(id)
            .orElseThrow(() -&gt; <span class="code-keyword">new</span> NotFoundException(<span class="code-string">"Product not found"</span>));
    }
}
                </div>
            </div>

            <!-- Section 10: Troubleshooting -->
            <div class="section" id="troubleshooting">
                <h2>10. ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ í•´ê²°</h2>

                <h3>10.1 ì—ì´ì „íŠ¸ ì—°ê²° ì•ˆ ë¨</h3>

                <div class="warning-box">
                    <strong>âš ï¸ ì¦ìƒ</strong><br>
                    "ì—ì´ì „íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ
                </div>

                <div class="step-container">
                    <div class="step-item">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <strong>ì—ì´ì „íŠ¸ ìƒíƒœ í™•ì¸</strong>
                            <div class="command-box">
# ì—ì´ì „íŠ¸ í”„ë¡œì„¸ìŠ¤ í™•ì¸
ps aux | grep ngrinder-agent

# Docker í™˜ê²½
docker ps | grep agent
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <strong>ë„¤íŠ¸ì›Œí¬ í™•ì¸</strong>
                            <div class="command-box">
# Controller í¬íŠ¸ í™•ì¸
netstat -an | grep 16001

# ë°©í™”ë²½ í™•ì¸
sudo ufw status
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <strong>__agent.conf í™•ì¸</strong>
                            <p>Controllerì˜ IPì™€ í¬íŠ¸ê°€ ì •í™•í•œì§€ í™•ì¸</p>
                        </div>
                    </div>
                </div>

                <h3>10.2 OutOfMemoryError ë°œìƒ</h3>

                <div class="warning-box">
                    <strong>âš ï¸ ì¦ìƒ</strong><br>
                    í…ŒìŠ¤íŠ¸ ì¤‘ "java.lang.OutOfMemoryError: Java heap space" ë°œìƒ
                </div>

                <div class="code-block" data-lang="bash">
<span class="code-comment"># Controller Heap í¬ê¸° ì¦ê°€</span>
java -Xms2g -Xmx4g -jar ngrinder-controller.war

<span class="code-comment"># Agent Heap í¬ê¸° ì¦ê°€ (run_agent.sh ìˆ˜ì •)</span>
JAVA_OPTS=<span class="code-string">"-Xms1g -Xmx2g"</span>

<span class="code-comment"># Docker í™˜ê²½</span>
docker run -e <span class="code-string">"JAVA_OPTS=-Xms2g -Xmx4g"</span> ngrinder/controller
                </div>

                <h3>10.3 Connection Timeout</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-comment">// ìŠ¤í¬ë¦½íŠ¸ì—ì„œ íƒ€ì„ì•„ì›ƒ ì„¤ì •</span>
@BeforeProcess
<span class="code-keyword">public static void</span> <span class="code-function">beforeProcess</span>() {
    <span class="code-comment">// Connection Timeout: 30ì´ˆ</span>
    HTTPRequestControl.setConnectionTimeout(<span class="code-number">30000</span>)
    
    <span class="code-comment">// Read Timeout: 60ì´ˆ</span>
    HTTPRequestControl.setTimeout(<span class="code-number">60000</span>)
}
                </div>

                <h3>10.4 Docker í™˜ê²½ì—ì„œ í˜¸ìŠ¤íŠ¸ ì ‘ê·¼ ë¶ˆê°€</h3>

                <div class="code-block" data-lang="groovy">
<span class="code-comment">// âŒ ì‘ë™í•˜ì§€ ì•ŠìŒ</span>
request.GET(<span class="code-string">"http://localhost:8080/api"</span>)

<span class="code-comment">// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•</span>
request.GET(<span class="code-string">"http://host.docker.internal:8080/api"</span>)

<span class="code-comment">// Linuxì˜ ê²½ìš°</span>
request.GET(<span class="code-string">"http://172.17.0.1:8080/api"</span>)
                </div>

                <h3>10.5 ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ ì˜¤ë¥˜</h3>

                <div class="info-box">
                    <strong>ğŸ’¡ í•´ê²° ë°©ë²•</strong><br>
                    1. ìŠ¤í¬ë¦½íŠ¸ ê²€ì¦ ë²„íŠ¼ í´ë¦­í•˜ì—¬ ë¬¸ë²• ì˜¤ë¥˜ í™•ì¸<br>
                    2. import ë¬¸ì´ ëª¨ë‘ ì˜¬ë°”ë¥¸ì§€ í™•ì¸<br>
                    3. Groovy ë¬¸ë²•ì— ë§ëŠ”ì§€ í™•ì¸ (ì„¸ë¯¸ì½œë¡  ì„ íƒì )<br>
                    4. íŠ¹ìˆ˜ë¬¸ìë‚˜ í•œê¸€ì´ í¬í•¨ëœ ê²½ìš° UTF-8 ì¸ì½”ë”© í™•ì¸
                </div>

                <h3>10.6 ì„±ëŠ¥ ì €í•˜ ë””ë²„ê¹…</h3>

                <div class="code-block" data-lang="bash">
<span class="code-comment"># 1. GC ë¡œê·¸ í™•ì¸</span>
jstat -gcutil &lt;pid&gt; <span class="code-number">1000</span>

<span class="code-comment"># 2. Thread Dump ìƒì„±</span>
jstack &lt;pid&gt; &gt; thread_dump.txt

<span class="code-comment"># 3. Heap Dump ìƒì„±</span>
jmap -dump:live,format=b,file=heap_dump.hprof &lt;pid&gt;

<span class="code-comment"># 4. ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ ëª¨ë‹ˆí„°ë§</span>
tail -f application.log | grep <span class="code-string">"ERROR\|WARN"</span>

<span class="code-comment"># 5. DB ìŠ¬ë¡œìš° ì¿¼ë¦¬ í™•ì¸</span>
mysql&gt; SELECT * FROM mysql.slow_log ORDER BY start_time DESC LIMIT <span class="code-number">10</span>;
                </div>
            </div>

            <!-- Summary -->
            <div class="section">
                <h2>ë§ˆë¬´ë¦¬</h2>
                
                <p>
                    ì´ ê°€ì´ë“œë¥¼ í†µí•´ nGrinderì˜ ê¸°ë³¸ë¶€í„° ê³ ê¸‰ í™œìš©ë²•ê¹Œì§€ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. 
                    ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ëŠ” ë‹¨ìˆœíˆ ë„êµ¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‹œìŠ¤í…œì„ ì´í•´í•˜ê³  
                    ë³‘ëª© ì§€ì ì„ ì°¾ì•„ ê°œì„ í•˜ëŠ” ì „ì²´ í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤.
                </p>

                <div class="success-box">
                    <strong>âœ… í•µì‹¬ ìš”ì•½</strong><br><br>
                    1. <strong>ì ì§„ì  ì ‘ê·¼</strong>: ì‘ì€ ë¶€í•˜ë¶€í„° ì‹œì‘í•˜ì—¬ ë‹¨ê³„ì ìœ¼ë¡œ ì¦ê°€<br>
                    2. <strong>í˜„ì‹¤ì ì¸ ì‹œë‚˜ë¦¬ì˜¤</strong>: ì‹¤ì œ ì‚¬ìš©ì íŒ¨í„´ì„ ë°˜ì˜<br>
                    3. <strong>ì¢…í•©ì ì¸ ëª¨ë‹ˆí„°ë§</strong>: ì• í”Œë¦¬ì¼€ì´ì…˜, DB, ì¸í”„ë¼ ëª¨ë‘ ê´€ì°°<br>
                    4. <strong>ì§€ì†ì ì¸ ê°œì„ </strong>: í…ŒìŠ¤íŠ¸ â†’ ë¶„ì„ â†’ ìµœì í™” â†’ ì¬í…ŒìŠ¤íŠ¸<br>
                    5. <strong>ë¬¸ì„œí™”</strong>: í…ŒìŠ¤íŠ¸ ê²°ê³¼ì™€ ê°œì„  ì‚¬í•­ì„ ê¸°ë¡
                </div>

                <div class="highlight-box">
                    <strong>ğŸ“š ì¶”ê°€ í•™ìŠµ ìë£Œ</strong><br><br>
                    â€¢ <a href="https://github.com/naver/ngrinder" target="_blank">nGrinder GitHub</a><br>
                    â€¢ <a href="https://github.com/naver/ngrinder/wiki" target="_blank">nGrinder Wiki</a><br>
                    â€¢ <a href="https://naver.github.io/ngrinder/" target="_blank">nGrinder ê³µì‹ ë¬¸ì„œ</a><br>
                    â€¢ <a href="https://spring.io/guides/gs/accessing-data-jpa/" target="_blank">Spring Data JPA ê°€ì´ë“œ</a>
                </div>
            </div>

            <!-- Tags -->
            <div class="tag-container">
                <span class="tag">#nGrinder</span>
                <span class="tag">#ì„±ëŠ¥í…ŒìŠ¤íŠ¸</span>
                <span class="tag">#LoadTest</span>
                <span class="tag">#Groovy</span>
                <span class="tag">#SpringBoot</span>
                <span class="tag">#JPA</span>
                <span class="tag">#ì„±ëŠ¥ìµœì í™”</span>
                <span class="tag">#DevOps</span>
            </div>
        </div>

        <!-- Footer -->
        <div class="blog-footer">
            <h3>ğŸ“¬ í”¼ë“œë°± & ë¬¸ì˜</h3>
            <p>ì´ ê°€ì´ë“œê°€ ë„ì›€ì´ ë˜ì…¨ë‚˜ìš”? ì§ˆë¬¸ì´ë‚˜ ê°œì„  ì‚¬í•­ì´ ìˆë‹¤ë©´ ì–¸ì œë“ ì§€ ì—°ë½ì£¼ì„¸ìš”!</p>
            <p style="margin-top: 20px; opacity: 0.8;">
                ì‘ì„±: Performance Engineering Team | 
                ìµœì¢… ìˆ˜ì •: 2024ë…„ 10ì›” 28ì¼
            </p>
        </div>
    </div>
</body>
</html>